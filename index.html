<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¾å‘³èœè°±</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=ZCOOL+QingKe+HuangYou&display=swap');
        
        body {
            font-family: 'ZCOOL QingKe HuangYou', cursive;
            margin: 0;
            padding: 0;
            background-color: #fff5f5;
            color: #5a3e36;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 15px rgba(255,192,203,0.3);
            border-radius: 15px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
            border-bottom: 2px dashed #ffb6c1;
        }

        header h1 {
            color: #ff6b88;
            margin: 0;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        /* å‘¨ç­›é€‰æŒ‰é’®æ ·å¼ */
        .week-filter {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .week-filter button {
            background-color: #ffb6c1;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .week-filter button:hover, .week-filter button.active {
            background-color: #ff6b88;
            transform: translateY(-2px);
        }

        /* è´­ç‰©è½¦æŒ‰é’®ç¾åŒ– */
        .add-to-cart {
            background-color: #ffb6c1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .add-to-cart:hover {
            background-color: #ff6b88;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .add-to-cart::before {
            content: "ğŸ›’";
        }

        /* èœå“å¡ç‰‡æ ·å¼ */
        .dish-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .dish-card {
            background-color: #fff;
            border: 1px solid #ffd6e0;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 3px 8px rgba(255,182,193,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .dish-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(255,182,193,0.3);
        }

        .dish-card img {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 3px solid #ffebee;
        }

        .dish-card h3 {
            margin: 10px 0;
            font-size: 1.4em;
            color: #ff6b88;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 8% auto;
            padding: 30px;
            border: none;
            width: 80%;
            max-width: 700px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(255,182,193,0.4);
            position: relative;
        }

        .close-btn {
            color: #ffb6c1;
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-btn:hover {
            color: #ff6b88;
        }

        .modal-content h2 {
            color: #ff6b88;
            margin-top: 0;
            font-family: 'Ma Shan Zheng', cursive;
        }

        .modal-content img {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 5px solid #ffebee;
        }

        .modal-content p {
            line-height: 1.8;
            margin-bottom: 15px;
            white-space: pre-wrap;
        }

        /* è´­ç‰©è½¦æ ·å¼ */
        .cart-icon {
            font-size: 1.8em;
            cursor: pointer;
            position: relative;
            color: #ff6b88;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -12px;
            background-color: #ff6b88;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.7em;
            font-weight: bold;
        }

        .cart-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            right: 20px;
            top: 80px;
            width: 300px;
            max-height: 70vh;
            overflow-y: auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            padding: 20px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dashed #ffd6e0;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-name {
            flex: 1;
            color: #5a3e36;
        }

        .cart-item-remove {
            color: #ff6b88;
            cursor: pointer;
            margin-left: 10px;
        }
		/* åœ¨styleæ ‡ç­¾ä¸­æ·»åŠ ä»¥ä¸‹æ ·å¼ */
		.view-details {
			background-color: #ffb6c1;
			color: white;
			border: none;
			padding: 10px 20px;
			border-radius: 20px;
			cursor: pointer;
			font-size: 1em;
			transition: all 0.3s ease;
			box-shadow: 0 2px 5px rgba(0,0,0,0.1);
			margin-top: 10px;
			display: inline-block;
		}

		.view-details:hover {
			background-color: #ff6b88;
			transform: translateY(-2px);
			box-shadow: 0 4px 8px rgba(0,0,0,0.15);
		}

		.view-details::before {
			content: "ğŸ” ";
		}
		
		/* åœ¨styleæ ‡ç­¾ä¸­æ·»åŠ æŒ‰é’®æ ·å¼ */
		.add-to-cart {
			background-color: #ff9eb5;
			color: white;
			border: none;
			padding: 10px 15px;
			border-radius: 20px;
			cursor: pointer;
			font-size: 0.9em;
			transition: all 0.3s ease;
			box-shadow: 0 2px 5px rgba(0,0,0,0.1);
			margin-top: 5px;
			margin-left: 10px;
		}

		.add-to-cart:hover {
			background-color: #ff6b88;
			transform: translateY(-2px);
			box-shadow: 0 4px 8px rgba(0,0,0,0.15);
		}

		.add-to-cart::before {
			content: "ğŸ›’ ";
		}
		
		/* æ·»åŠ æŒ‰é’®ç»„æ ·å¼ */
		.button-group {
			display: flex;
			justify-content: center;
			gap: 10px;
			margin-top: 10px;
		}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>ğŸ¥— ä¸€å‘¨çˆ±å¿ƒèœè°±</h1>
                <p style="color: #ff6b88; font-size: 1.2em; margin-top: 5px;">âœ¨ ä¸“å±äºå©·å©·å®å® âœ¨</p>
            </div>
            <div class="cart-icon">ğŸ›’<span class="cart-count">0</span></div>
        </header>

        <!-- å‘¨ç­›é€‰æŒ‰é’® -->
        <div class="week-filter">
            <button data-day="all" class="active">å…¨éƒ¨</button>
            <button data-day="mon">å‘¨ä¸€</button>
            <button data-day="tue">å‘¨äºŒ</button>
            <button data-day="wed">å‘¨ä¸‰</button>
            <button data-day="thu">å‘¨å››</button>
            <button data-day="fri">å‘¨äº”</button>
            <button data-day="sat">å‘¨å…­</button>
            <button data-day="sun">å‘¨æ—¥</button>
        </div>

        <!-- èœå“å±•ç¤ºåŒº -->
        <div class="dish-grid">
            <!-- èœå“å¡ç‰‡å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

    <!-- èœå“è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="dishModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 id="modalDishName"></h2>
            <img id="modalDishImage" src="" alt="">
            <p><strong>ä¸»æ–™é…èœï¼š</strong><span id="modalIngredients"></span></p>
            <p><strong>è°ƒæ–™ï¼š</strong><span id="modalSeasonings"></span></p>
            <p><strong>åšæ³•ï¼š</strong><span id="modalSteps"></span></p>
            <button class="add-to-cart" id="modalAddToCart">åŠ å…¥è´­ç‰©è½¦</button>
        </div>
    </div>

    <!-- è´­ç‰©è½¦æ¨¡æ€æ¡† -->
    <div id="cartModal" class="cart-modal">
        <h2 style="color: #ff6b88; margin-top: 0;">æˆ‘çš„è´­ç‰©è½¦</h2>
        <div id="cartItems">
            <!-- è´­ç‰©è½¦å†…å®¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
        </div>
        <button class="add-to-cart" style="margin-top: 15px; width: 100%;" id="checkoutBtn">ç»“ç®—</button>
    </div>

    <script src="dishes.js"></script>
    <script>
        // èœå“æ•°æ® - 14é“èœå“ï¼Œå·²ç§»é™¤priceå­—æ®µ
        var dishes = [];

        // åŠ¨æ€è¯»å–dishes.txtæ–‡ä»¶
        // 1. ä½¿ç”¨fetch APIåŠ è½½æ–‡ä»¶
        // window.addEventListener('DOMContentLoaded', () => {
        //     const script = document.createElement('script');
        //     script.src = 'dishes.js';
        //     script.onload = function() {
        //         console.log('æ•°æ®åŠ è½½æˆåŠŸ:', dishesData);
        //         // ä½¿ç”¨dishesDataå˜é‡
        //         dishes = dishesData;
        //     };
        //     document.head.appendChild(script);
        // });

        // è´­ç‰©è½¦æ•°æ®
        let cart = [];

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            renderDishes(dishesData);
            setupEventListeners();
        });

        // æ¸²æŸ“èœå“
        function renderDishes(dishesToRender) {
            const dishGrid = document.querySelector('.dish-grid');
            dishGrid.innerHTML = '';

            dishesToRender.forEach(dish => {
                const dishCard = document.createElement('div');
                dishCard.className = 'dish-card';
                dishCard.dataset.id = dish.id;
                dishCard.dataset.category = dish.category;
                dishCard.dataset.day = dish.day;
                
                dishCard.innerHTML = `
                    <img src="${dish.image}" alt="${dish.name}">
                    <h3>${dish.name}</h3>
					<div class="button-group">
						<button class="view-details" data-id="${dish.id}">æŸ¥çœ‹è¯¦æƒ…</button>
						<button class="add-to-cart" data-id="${dish.id}">åŠ å…¥è´­ç‰©è½¦</button>
					</div>
                `;
                
                dishGrid.appendChild(dishCard);
            });
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬
        function setupEventListeners() {
            // è¯¦æƒ…æŒ‰é’®ç‚¹å‡»
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('view-details')) {
                    const dishId = parseInt(e.target.dataset.id);
                    const dish = dishesData.find(d => d.id === dishId);
                    showDishModal(dish);
                }
            });

            // å…³é—­æ¨¡æ€æ¡†
            document.querySelector('.close-btn').addEventListener('click', function() {
                document.getElementById('dishModal').style.display = 'none';
            });

            // åŠ å…¥è´­ç‰©è½¦
            document.getElementById('modalAddToCart').addEventListener('click', function() {
                const dishId = parseInt(document.getElementById('modalDishName').dataset.id);
                const dish = dishesData.find(d => d.id === dishId);
                addToCart(dish);
                document.getElementById('dishModal').style.display = 'none';
            });

            // è´­ç‰©è½¦å›¾æ ‡ç‚¹å‡»
            document.querySelector('.cart-icon').addEventListener('click', function() {
                const cartModal = document.getElementById('cartModal');
                cartModal.style.display = cartModal.style.display === 'block' ? 'none' : 'block';
            });

            // å‘¨ç­›é€‰æŒ‰é’®
            document.querySelectorAll('.week-filter button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelector('.week-filter button.active').classList.remove('active');
                    this.classList.add('active');
                    
                    const day = this.dataset.day;
                    if (day === 'all') {
                        renderDishes(dishesData);
                    } else {
                        const filteredDishes = dishesData.filter(dish => dish.day === day);
                        renderDishes(filteredDishes);
                    }
                });
            });
        }

        // æ˜¾ç¤ºèœå“è¯¦æƒ…æ¨¡æ€æ¡†
        function showDishModal(dish) {
            const modal = document.getElementById('dishModal');
            document.getElementById('modalDishName').textContent = dish.name;
            document.getElementById('modalDishName').dataset.id = dish.id;
            document.getElementById('modalDishImage').src = dish.image;
            document.getElementById('modalIngredients').textContent = dish.ingredients;
            document.getElementById('modalSeasonings').textContent = dish.seasonings;
            document.getElementById('modalSteps').textContent = dish.steps;
            modal.style.display = 'block';
        }

        // æ·»åŠ åˆ°è´­ç‰©è½¦
        function addToCart(dish) {
            cart.push(dish);
            updateCartCount();
            updateCartItems();
        }

        // æ›´æ–°è´­ç‰©è½¦æ•°é‡
        function updateCartCount() {
            document.querySelector('.cart-count').textContent = cart.length;
        }

        // æ›´æ–°è´­ç‰©è½¦å†…å®¹
        function updateCartItems() {
            const cartItems = document.getElementById('cartItems');
            cartItems.innerHTML = '';
            
            cart.forEach((dish, index) => {
                const item = document.createElement('div');
                item.className = 'cart-item';
                item.innerHTML = `
                    <span class="cart-item-name">${dish.name}</span>
                    <span class="cart-item-remove" data-index="${index}">âœ•</span>
                `;
                cartItems.appendChild(item);
            });

            // ç§»é™¤è´­ç‰©è½¦é¡¹
            document.querySelectorAll('.cart-item-remove').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    cart.splice(index, 1);
                    updateCartCount();
                    updateCartItems();
                });
            });
        }

        // ç»“ç®—æŒ‰é’®
        document.getElementById('checkoutBtn').addEventListener('click', function() {
            alert(`å·²æˆåŠŸç»“ç®— ${cart.length} é“èœå“ï¼`);
            cart = [];
            updateCartCount();
            updateCartItems();
            document.getElementById('cartModal').style.display = 'none';
        });


		/* æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç† */
		document.addEventListener('click', function(e) {
			if (e.target.classList.contains('add-to-cart')) {
				const dishId = parseInt(e.target.dataset.id);
				const dish = dishesData.find(d => d.id === dishId);
				addToCart(dish);
				alert(`${dish.name} å·²åŠ å…¥è´­ç‰©è½¦ï¼`);
			}
		});
    </script>
</body>
</html>